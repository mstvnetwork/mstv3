<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="MSTV Network offers a variety of live TV channels including music, movies, and more.">
  <meta name="robots" content="index, follow">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>MSTV INDIA</title>
  <style>
    /* keep your existing CSS */
  </style>
</head>
<body>

  <!-- Optional: Removed audio autoplay for iOS -->
  <!--
  <audio autoplay loop>
    <source src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Monplaisir/HiFi_City_Tales/Monplaisir_-_05_-_Your_Lovely_Face.mp3" type="audio/mp3">
  </audio>
  -->

  <div class="title-3d">MSTV INDIA</div>
  <div class="scrolling-text">
    <div class="scrolling-content">Welcome to MSTV India - Refresh the webpage to auto-tune channels!</div>
  </div>

  <div class="channel-selector-text">Select Channel</div>
  <div class="channel-selection">
    <select id="channel-select">
      <option value="">ðŸ‘‰ðŸ“ºðŸ“ºðŸ“º</option>
      <option value="https://desiplaylive.akamaized.net/.../1.m3u8">MSTV DESI PLAY</option>
      <option value="https://dreyfus.securitytactics.com/colorshindi.html">COLORS TV</option>
      <option value="https://dreyfus.securitytactics.com/zeecinema.html">ZEE CINEMA</option>
    </select>
  </div>

  <div class="player-container" id="player-container">
    <div class="live-stamp">MSTV NETWORK</div>
    <div class="loading-indicator" id="loading">Loading stream...</div>
    <img src="/logo.png" class="logo-overlay" alt="MSTV Logo" />
    
    <!-- iframe sandbox removed -->
    <iframe id="media-player" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    
    <video id="video-player" autoplay muted playsinline></video>
    <img id="placeholder-image" src="Design-Studio-2025-01-22 (1).png" alt="Stream Placeholder" />
  </div>

  <script>
    const select = document.getElementById('channel-select');
    const videoPlayer = document.getElementById('video-player');
    const iframePlayer = document.getElementById('media-player');
    const placeholder = document.getElementById('placeholder-image');
    const loading = document.getElementById('loading');

    function showLoading(show) {
      loading.style.display = show ? 'block' : 'none';
    }

    select.addEventListener('change', () => {
      const url = select.value;
      showLoading(true);

      videoPlayer.pause();
      videoPlayer.removeAttribute('src');
      videoPlayer.load();
      iframePlayer.src = '';
      placeholder.style.display = 'none';

      const isIframe = url.includes('.html') || url.includes('youtube.com') || url.includes('embed') || url.includes('twitch.tv');

      if (isIframe) {
        iframePlayer.style.display = 'block';
        iframePlayer.src = url;
        iframePlayer.onload = () => showLoading(false);
        videoPlayer.style.display = 'none';
      } else {
        videoPlayer.style.display = 'block';
        videoPlayer.src = url;
        videoPlayer.muted = true; // required for iOS autoplay
        videoPlayer.autoplay = true;
        videoPlayer.play().then(() => showLoading(false)).catch(() => showLoading(false));
        iframePlayer.style.display = 'none';
      }
    });

    videoPlayer.addEventListener('contextmenu', e => e.preventDefault());
    videoPlayer.style.display = 'none';
    iframePlayer.style.display = 'none';
  </script>

</body>
</html>
